---
# Only the main Sass file needs front matter, rest is included from site.sass.sass_dir
sitemap:
  exclude: true
---
@charset "utf-8";

@import "functions.scss";
@import "01_settings_colors.scss";
@import "02_settings_typography.scss";
@import "03_settings_mixins_media_queries.scss";
@import "04_settings_global.scss";
@import "05_normalize.scss"; // normalize.css v3.0.2

@import "foundation-components/top-bar";
@import "foundation-components/accordion";
@import "foundation-components/alert-boxes";
@import "foundation-components/breadcrumbs";
@import "foundation-components/block-grid";
@import "foundation-components/button-groups";
@import "foundation-components/buttons";
@import "foundation-components/clearing";
@import "foundation-components/dropdown";
@import "foundation-components/dropdown-buttons";
@import "foundation-components/flex-video";
@import "foundation-components/forms";
@import "foundation-components/grid";
@import "foundation-components/inline-lists";
@import "foundation-components/keystrokes";
@import "foundation-components/panels";
@import "foundation-components/reveal";
@import "foundation-components/side-nav";
@import "foundation-components/sub-nav";
@import "foundation-components/tables";
@import "foundation-components/thumbs";
@import "foundation-components/top-bar";
@import "foundation-components/type";
@import "foundation-components/visibility";

@import "06_typography.scss";
@import "07_layout.scss";
@import "foundation-components/grid";
@import "09_elements.scss";

{% if site.asciidoctor-enabled == true %}
@import "10_asciidoc.scss";
{% endif %}

@import "11_syntax-highlighting.scss";

/* Custom css */
.small-gap{
  margin-bottom: 0.25rem;
}

/* Header font weight */
h1, h2, h3, h4, h5, h6 {
  font-weight: 600; // Semi-bold
}

/* Topbar customizations */
#navigation {
  position: fixed !important;
  top: 0;
  left: 0;
  right: 0;
  z-index: 999;
  width: 100%;
}

.top-bar {
  // Constrain width to match content row width and center it
  max-width: 62.5rem;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 0 !important; // Remove gap between nav and Magellan bar
  padding-left: 0.9375rem;
  padding-right: 0.9375rem;
  height: 35px !important; // Match visible space height
  line-height: 35px !important; // Match visible space height
  
  // Allow expanded state to have auto height for mobile menu
  &.expanded {
    height: auto !important;
    overflow: visible !important;
  }
  
  // Hide dividers to remove white gaps between navigation items (only in top-bar-section)
  .top-bar-section {
    .divider,
    [role="separator"] {
      display: none !important;
    }
  }
  
  // Navigation link styles - adjust height to match visible space (only in top-bar-section)
  .top-bar-section a {
    font-weight: 600; // Semi-bold
    transition: font-style 0.2s ease;
    padding-left: 0.9375rem !important; // Equal left padding
    padding-right: 0.9375rem !important; // Equal right padding for centered text
    line-height: 35px !important; // Match visible space height
    
    // Desktop styles - fixed height, centered text
    .top-bar:not(.expanded) & {
      padding-top: 0 !important;
      padding-bottom: 0 !important;
      height: 35px !important; // Match visible space height
      display: inline-block;
      vertical-align: middle;
      text-align: center !important; // Center text horizontally within button
    }
    
    // Mobile expanded menu styles - block display, left-aligned
    .top-bar.expanded & {
      display: block !important;
      text-align: left !important; // Left align for mobile menu
      padding: 12px 0.9375rem !important; // Foundation default mobile padding
      height: auto !important;
    }
    
    &:hover {
      font-weight: 600; // Semi-bold
      font-style: italic;
    }
  }
  
  // Remove padding on list items to make them edge-to-edge (only in top-bar-section)
  // But allow proper display when expanded on mobile
  .top-bar-section li {
    padding: 0 !important;
    margin: 0 !important;
    line-height: 35px !important; // Match visible space height
    
    // Only set fixed height when not in mobile expanded state
    .top-bar:not(.expanded) & {
      height: 35px !important; // Match visible space height
    }
  }
  
  // Ensure top-bar-section is visible when expanded
  .top-bar-section {
    // When expanded, allow proper display
    .top-bar.expanded & {
      display: block !important;
      visibility: visible !important;
    }
  }
  
  // Adjust title area to match height - preserve default Foundation styles
  .title-area {
    height: 35px !important;
    line-height: 35px !important;
    
    // Preserve default padding/margin for title area list items
    li {
      padding: 0 !important; // Reset any padding from top-bar-section rule
      margin: 0; // Use default Foundation margin
    }
  }
  
  .name {
    height: 35px !important;
    line-height: 35px !important;
    
    h1, h2, h3, h4, p, span {
      line-height: 35px !important;
      height: 35px !important;
    }
    
    // Preserve default link styles for title area
    a {
      padding: 0 1.0416666667rem !important; // Foundation default
      display: block;
      height: auto !important;
      line-height: 35px !important;
    }
  }
  
  // Adjust toggle button - preserve default Foundation styles
  .toggle-topbar {
    height: 35px !important;
    line-height: 35px !important;
    padding: 0 !important; // Reset any padding from top-bar-section rule
    margin: 0; // Use default Foundation margin
    
    a {
      padding: 0 1.0416666667rem !important; // Foundation default
      display: block;
      height: 35px !important;
      line-height: 35px !important;
      text-align: left !important; // Override center alignment
    }
  }
}

// Mobile: Constrain expanded menu width
@media only screen and (max-width: 40em) {
  .top-bar.expanded {
    max-width: 62.5rem !important; // Match content width
    margin-left: auto;
    margin-right: auto;
    
    .top-bar-section {
      max-width: 62.5rem !important; // Constrain menu width
      margin-left: auto;
      margin-right: auto;
    }
  }
}

// Publication styles - maintain right margin for cleaner text layout
.publication {
  .small-12.columns {
    padding-right: 8.33333% !important; // Match the width of small-2 column (2/12 = 16.666%, but accounting for column padding)
  }
}

// Add padding to body to account for fixed navigation (floating menu)
// Navigation bar stays at usable size on both desktop and mobile
body {
  padding-top: 35px !important; // Height of navigation bar
}

/* Magellan navigation bar customizations */
[data-magellan-expedition] {
  // Override min-width: 100% and constrain width to match content row width
  min-width: 0 !important;
  max-width: 62.5rem;
  margin-left: auto;
  margin-right: auto;
  margin-top: 0 !important; // Remove gap between nav and Magellan bar
  margin-bottom: 0 !important;
  padding-top: 0 !important; // Remove any top padding that could cause overlap
  padding-left: 0.9375rem;
  padding-right: 0.9375rem;
  background-color: $background; // Match website background
  z-index: 998 !important; // Below navigation bar (999) but above content
  
  // When fixed, position it directly below navigation bar with no gap
  &.fixed {
    position: fixed !important;
    top: 35px !important; // Position directly below navigation bar (35px height, no gap)
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 100% !important;
    max-width: 62.5rem !important;
    background-color: $background !important; // Match website background
    z-index: 998 !important; // Below navigation bar (999) but above content
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  
  // Override white backgrounds on sub-nav items and vertically center text
  .sub-nav {
    background: $background !important;
    display: flex !important;
    align-items: center !important; // Vertically center items
    min-height: 35px !important; // Match navigation bar height
    
    li {
      display: flex !important;
      align-items: center !important; // Vertically center link within li
      
      a {
        background: transparent !important;
        display: flex !important;
        align-items: center !important; // Vertically center text
        line-height: 1 !important; // Reset line-height for flex centering
        padding-top: 0.5rem !important;
        padding-bottom: 0.5rem !important;
      }
    }
    
    // Ensure active state has proper background and visible text
    li.active a {
      background: $primary-color !important; // Blue background for active item
      color: $baby-powder !important; // Baby powder text on blue background
    }
  }
}

/* Mobile responsive styles */
@media only screen and (max-width: 40em) {
  // Team section tables - 2 columns on mobile (left to right)
  .team-section-table {
    table-layout: auto !important;
    
    // Hide empty cells on mobile
    td:empty {
      display: none !important;
    }
    
    td {
      display: block;
      padding: 0.5rem;
      box-sizing: border-box;
    }
    
    tr {
      display: block;
      clear: both;
      overflow: hidden;
      width: 100%;
    }
    
    // Headers take full width and clear floats
    .header-cell {
      width: 100% !important;
      float: none !important;
      clear: both !important;
      display: block !important;
    }
    
    // Picture cells should be 2 columns, float left
    .picture-cell {
      width: 50% !important;
      float: left !important;
      display: block !important;
    }
    
    // Ensure rows clear properly
    tr:after {
      content: "";
      display: table;
      clear: both;
    }
  }
  
  
  // Nick's section - stack vertically and center on mobile
  .row .small-4.columns,
  .row .small-8.columns {
    width: 100% !important;
    float: none !important;
    text-align: center;
  }
  
  // Nick's image - make it smaller on mobile
  .small-4.columns {
    img {
      max-width: 100%;
    }
    
    div[style*="width: 300px"] {
      width: 200px !important;
      height: 200px !important;
      max-width: 100%;
      margin: 0 auto 1rem !important;
    }
    
    // Social links should be centered below image
    .social-icons {
      justify-content: center;
      margin: 0 auto;
    }
  }
  
  // Nick's text column - center everything
  .small-8.columns {
    text-align: center;
    
    p {
      text-align: center;
    }
  }
  
  // Magellan navigation - allow horizontal scroll or wrap
  [data-magellan-expedition] {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    
    .sub-nav {
      white-space: nowrap;
      overflow-x: auto;
      
      li {
        display: inline-block;
        white-space: normal;
      }
    }
  }
  
  // Team member name - allow wrapping on mobile
  .team-section-table .picture-cell .team-member-card p:first-of-type {
    white-space: normal !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
  
  // Banner - ensure no cutoff on mobile, maintain proportions
  #masthead,
  #masthead-with-text {
    height: 200px !important; // Smaller height on mobile (maintains 2:1 ratio with desktop 400px)
    overflow-x: hidden !important;
    
    .row {
      max-width: 100% !important;
      margin-left: 0 !important;
      margin-right: 0 !important;
      padding-left: 0.9375rem;
      padding-right: 0.9375rem;
    }
    
    .row .columns {
      padding-left: 0;
      padding-right: 0;
    }
    
    // Logo maintains 55% proportion on mobile too
    #logo img {
      height: 55% !important; // Maintains same proportion as desktop
    }
    
    .backstretch {
      height: 200px !important; // Smaller height on mobile
      left: 0 !important;
      right: 0 !important;
      width: 100% !important;
      max-width: 100% !important;
      
      img {
        height: 200px !important; // Smaller height on mobile
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
      }
    }
  }
  
  // Home page content - add horizontal margins
  body.frontpage .row {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    
    // Ensure nested content also has proper spacing
    > * {
      padding-left: 0;
      padding-right: 0;
    }
    
    // Headings and paragraphs should have consistent spacing
    h1, h2, h3, h4, h5, h6, p, ul, ol {
      padding-left: 0;
      padding-right: 0;
    }
  }
  
  // Group picture on home page - make it full width on mobile
  body.frontpage .row .small-6.small-offset-3 {
    width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    float: none !important;
  }
}

/* Banner/masthead customizations */
#masthead,
#masthead-with-text {
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 400px; // Fixed height for banner on desktop
  margin-bottom: 0; // Remove default margin to reduce gap
  background-color: transparent !important; // Remove default background so gradient shows
  
  // Ensure logo/content overlays the background
  .row {
    position: relative;
    z-index: 10;
    height: 100%;
    display: flex;
    align-items: center; // Vertically center content
    justify-content: flex-start; // Align logo to the left (aligned with body text)
    max-width: 62.5rem; // Match content width
    margin-left: auto;
    margin-right: auto;
    padding-left: 0.9375rem; // Match content padding
    padding-right: 0.9375rem;
  }
  
  // Ensure the column containing the logo also centers vertically
  .row .columns {
    display: flex;
    align-items: center;
    height: 100%;
    padding-left: 0;
    padding-right: 0;
  }
  
  #logo {
    position: relative;
    z-index: 10;
    display: flex;
    align-items: center; // Vertically center the logo image
    justify-content: flex-start; // Align logo to the left
    text-decoration: none;
    height: 100%; // Logo container takes full height
    width: auto; // Only take needed width
    
    // Hide any text content in the link
    text-indent: 0;
    font-size: 0;
    line-height: 0;
    
    img {
      position: relative;
      z-index: 10;
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      height: 55% !important; // Logo height is 55% of banner height (maintains proportion)
      width: auto !important; // Maintain aspect ratio
      max-width: 100%; // Don't exceed column width
      object-fit: contain; // Ensure entire logo is visible
      margin: 0; // Remove any default margins
    }
  }
  
  // Backstretch container should fill the masthead and stretch horizontally
  .backstretch {
    position: absolute !important;
    width: 100% !important;
    height: 400px !important; // Fixed height to match banner
    left: 0 !important;
    top: 0 !important;
    z-index: 1 !important;
    overflow: hidden;
    
    img {
      width: 100% !important;
      height: 400px !important; // Fixed height to match banner
      min-width: 100% !important;
      object-fit: cover !important;
      object-position: center center !important;
    }
  }
}
